<!DOCTYPE html>

<html>

<head>
 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
    <title>个人任务编辑</title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
	<link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css" />
	<!-- 可选的Bootstrap主题文件（一般不用引入） -->
	<link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" />
	<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
	<script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
	<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
	<script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	
	<!-- Font Awesome -->
	<link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
	
	<!-- eteams.css -->
    <link href="resources/css/meditor.css" type="text/css" rel="stylesheet" />  
    <style>
    /********************************头部*****************************************/
    	.header-user {
    		float: right;
    		width: 100px;
    		height: 48px;
    		-webkit-transition: background-color .2s linear;
			-o-transition: background-color .2s linear;
			transition: background-color .2s linear; 
			/**margin: 0 9px 0 0;*/
			font-style: normal;
			vertical-align: middle;
    	}
    	.header-img {    		
    		float: left;
    	}
    	.header-img-user {
    		float: right;
    		border-radius: 50%;
    		
    	}
    	.currentPage{
			color : red
		}
		.header-user-name {
			margin-top: 15px;
			margin-left: 48px;
		}
	/********************************主容器**********************************/
		.main--aside-task-show {
			position: relative;
		}	
		.main-aside-table-task {
			font-size: 16px;
			margin-left: 5%;
			color: #b8babd;
		}
		.task-font {
			display: block;
			font-size: 10px;
			margin-top: 10%;
			width: 70px;
			color: #b8babd;
		}
		.left-aside-task {
			margin: 0;
			padding: 0;
			background-color: #1e2631;
		}
		.left-aside-task-total {
			font-size: 12px;
			color: #b8babd;
			padding-top: 8px;
		}
		.main {
			width: 80%;
			bottom: 0;
   			position: absolute;
    		top: 35px;
    		left: 20%;
   			-webkit-transition: left .2s linear;
    		-moz-transition: left .2s linear;
    		-ms-transition: left .2s linear;
    		transition: left .2s linear;
		}
		/*****************************************工具类集合************************************/
		.main-tool-list {
			height: 40px;
  			padding: 0;
  			margin: 0;
   			border-bottom: 1px solid #bebebe;
    		background-color: #f3f3f3;
    		position: relative;
    		width: 100%
    		z-index: 100;
    		-webkit-box-shadow: 0 0 5px rgba(0,0,0,0.2);
   		 	-o-box-shadow: 0 0 5px rgba(0,0,0,0.2);
    		box-shadow: 0 0 5px rgba(0,0,0,0.2);
		}
		.task-tool-list {
			display: block;
			padding: 0;
			margin: 0;
			height: 100%;
		}
		.task-tool-single {
			position: relative;
			display: block;
			float: left;
			width: 18%;
			height: 30px;
			margin-top: 6px;
			margin-left: 3px;
		}
		.task-tool-control {
			display: block;
    		width: 100%;
   			height: 30px;
  			/* padding: 6px 12px; */
    		font-size: 14px;
   		 	line-height: 1.42857143;
    		color: #555;
    		background-color: #fff;
    		background-image: none;
    		border: 1px solid #ccc;
    		border-radius: 4px;
    		-webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
    		box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
    		-webkit-transition: border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;
    		-o-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
    		transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
		}
		/**************************************任务css*******************************************/
		.main-task-list {
			width: 100%;
			height: 200px;
		}
		#todolist {
			display: block;
			margin:0;
			padding:0;
			list-style:none;
			font-size: 16px;
		}
		.test {
			display: block;
			height:32px;
    		line-height:32px;
    		background: #fff;
    		position:relative;
    		margin-bottom: 10px;
			padding:0 45px;
			border-radius:3px;
			border-left: 5px solid #4ea3ec;
			box-shadow: 0 1px 2px rgba(0,0,0,0.07);
		}
		.page-p {
			margin: 0;
		    width: 1050px;
		    hiegth: 25px;
		    display: block;
		    -webkit-margin-before: 1em;
		    -webkit-margin-after: 1em;
		    -webkit-margin-start: 0px;
		    -webkit-margin-end: 0px;
		    line-height: 32px;
		}	
		.test {
			height:32px;
    		line-height:32px;
    		background: #fff;
    		position:relative;
    		margin-bottom: 10px;
			padding:0;
			border-radius:3px;
			border-left: 5px solid #4ea3ec;
			box-shadow: 0 1px 2px rgba(0,0,0,0.07);
			border-left: 5px solid #999;
		    opacity: 0.5;
		    overflow: hidden;
		}
		.page-p {
			display: block;
			margin: 0;
		    width: 70%;
		    heigth: 25px;
		  /**  overflow: hidden;*/
		    -webkit-margin-before: 1em;
		    -webkit-margin-after: 1em;
		    -webkit-margin-start: 0px;
		    -webkit-margin-end: 0px;
		    /**line-height: 32px;*/
		}
		.check-input {
			position:absolute;
			top:2px;
			left:10px;
			width:22px;
			height:22px;
		}
		.line-task-display {
			position: absolute;
			display: block;
			margin-left: 43px;
			margin-top: -8px;
			float: left;
			width: 200px;
			height: 20px;
			line-height: 20px;
			overflow: hidden;
		}
		.delete-img {
			position: absolute;
			display: block;
			float: left;
			margin-left: 289px;
			margin-top: -14px;
		}
		.page-task {
			margin-top: 15px;
			margin-left: 120px;
			height: 30px;
			overflow: hidden;
		}
		.task-right-detail {
			/**webkit-transition: all ease-in-out .5s;
   				-moz-transition: all ease-in-out .5s;
   				-ms-transition: all ease-in-out .5s;
			    -o-transition: all ease-in-out .5s;
			    transition: all ease-in-out .5s;
			    -webkit-transform: translateX(800px) translateY(0px);
			    -moz-transform: translateX(800px) translateY(0px);
			    -ms-transform: translateX(800px) translateY(0px);
			    -o-transform: translateX(800px) translateY(0px);
			    transform: translateX(800px) translateY(0px);*/
			    position: fixed;
			    top: 90px;
			    bottom: 0;
			    right: 0;			    
			    background: #f5f5f5;
			    border-left: 1px solid #ddd;
			    width: 80%;
			    -webkit-box-shadow: -3px 0 4px rgba(0,0,0,0.1);
			    -o-box-shadow: -3px 0 4px rgba(0,0,0,0.1);
			    box-shadow: -3px 0 4px rgba(0,0,0,0.1);
		}
		.task-right-index {
			z-index: 999;
		}
		.task-right-title {
			display: block;
			width: 100%;
			height: 51px;
			border-bottom: 1px solid #ddd;
			text-align: center;
		}
		.task-right-close {
			float: right;
			width: 51px;
			height: 51px;
			margin-right: 10px;				
			border-left: 1px solid #ddd;
		}
		.task-right-close > a {
			display: block;
			font-size: 40px;
			margin-bottom: 15px;
			color: #333;
		}
		.task-right-close:hover {
			background-color: #ddd;
		}
		a:hover {
			text-decoration: none;
		}
		.task-right-textarea {
			position: absolute;
			width: 260px;	
			height: 200px;		
			margin-left: 50px;
			background-color: #f5f5f5;
			border: none;		
		}
		.url-address-commit {
			position: absolute;
			width: 250px;	
			height: 200px;	
			margin-top:490px;	
			margin-left: 50px;
			background-color: #f5f5f5;
			border: 1px soild red;
			
		}
		
		.task-right-submit {
			position: absolute;
			margin-top: 230px;
			float: left;
			margin-left: 100px;
		}
		
		/* .url-address-textarea {
			border:solid 1px;
			position: absolute;
			margin-top: 490px;
			float: left;
			margin-left: 100px;
		}  */ 
		.task-user-img {
			display: block;
			border-radius: 50%;
		}
		.task-user-update {
			position: absolute;
			width: 50px;
		}
		.task-url-update {
			position: absolute;
			width: 70px;
		}
		/********************************************层叠页面*********************************/
		#task-other-update {
			display:none;
		}
		
		
		.daycheck-index {
			z-index: 997;
		}
		.task-insert-index {
			z-index:998;
		}
		#daycheck-insert-page {
			display: none;
		}
		#task-other-insert {
			display: none;
		}
    </style>
    
</head>

<body e-lang="cn" class="active">

	<input type="hidden" value="${status}" id="statuess"/>
	
	<!-- 导航栏 -->
    <div>
    	<header id="navigation" class="navigation">
    		<div id="header-user" class="header-user fr">
                <div class="header-img"><img class="header-img-user" src="./eteams_files/img/avatar.png" width="40px" height="46px" ></div>
                <div class="header-user-name fr">
                    <a class="" href="javascript:void(0);" data-url="/portal">
                        <p class=""><span style="font:#fff;"></span>jim</p>
                    </a>
                </div>
            </div>
             
            <div id="cLogo" class="cLogo fl">
                <div class="fl" href="/"><img src="./eteams_files/img/720LOGO .png" width="100px" height="49px"></div>
            	
            </div>                       
    	</header>    	
    </div>
    <!-- 主容器 -->
   <div id="mainContainer" >
   		<aside class="aside">
   			<div class="main--aside-task-show">
   				<a class="main-aside-table-task" style="background:#273240;"> 任务</a>
   				<ul class="left-aside-task">
					 <li class="task-font">						
				 		<a  href="task/listAllTaskM/1" style="color:#b8babd;">全部任务</a>
					</li>
					<li class="task-font">
						 <a href="task/listFocusTaskM/1" style="color:#b8babd;">关注的任务</a>
					</li>
					<li class="task-font">
						<a href="task/listCompleteTaskM/1" style="color:#b8babd;">已完成任务</a>
					</li>
					<li class="task-font">
						<a href="task/listUncompleteTaskM/1" style="color:#b8babd;">未完成任务</a>
					</li>
				 </ul>
   			</div>
   			<div class="aside-show" id="insert-aside-task">
				<a class="left-aside-task-total" type="background:#273240;"  style="display:block;margin-top:10px;"> 新建任务</a>
			</div>
			<div class="aside-show" id="daycheck-insert">
				<a class="left-aside-task-total" type="background:#273240;"  style="display:block;margin-top:;">每日4C反馈</a>
			</div>
   		</aside>

   		<div class="main " id="main-id">
   			<div class="main-tool-list">
   				<ul class="task-tool-list">
   					<li class="task-tool-single" id="delete-task">
   						<div class="input-group w-30" ><input class="task-tool-control pr-15" type="button" value="删除" />
   					</li>
   					<li class="task-tool-single" id="focus-task">
   						<div class="input-group w-30" ><input class="task-tool-control pr-15" type="button" value="关注" />
   					</li>
   					<li class="task-tool-single" id="cancel-task">
   						<div class="input-group w-30" ><input class="task-tool-control pr-15" type="button" value="取关" />
   					</li>
   					<li class="task-tool-single" id="complete-task">
   						<div class="input-group w-30" ><input class="task-tool-control pr-15" type="button" value="完成" />
   					</li>
   					<li class="task-tool-single" id="cancel-complete-task">
   						<div class="input-group w-30" ><input class="task-tool-control pr-15" type="button" value="未完成" />
   					</li>
   				</ul>
   			</div>
   			<div class="main-task-list">
   				
				<div class="page-task">
		
				</div>	
   			</div>
   		</div>
   		 <div id="task-other-update" class="task-right-detail task-right-index">
        	<h3 class="task-right-title">任务修改页
        		<div class="task-right-close"><a>x</a></div>
        	</h3>
        	<div>
        		<div class="task-user-update"><img class="task-user-img" src="./eteams_files/img/avatar.png" width="40px" hieght="37px"></div>
        		<textarea class="task-right-textarea" id="task-right-content" style="overflow:scroll;overflow-y:hidden;overflow-x:hidden;"></textarea>
        		 <a style="font-size:20px;color:#333;"> 
        			<div class="task-url-update">日志链接：</div>
        		<textarea class="url-address-commit" id="url-right-content" style="color:blue; overflow:scroll;overflow-y:hidden;overflow-x:hidden;"></textarea></a>
        		<input type="hidden" id="task-content-id">    
        	</div>
        	<div class="task-right-submit" id="task-right-onetask"><input type="button" value="提交" class="buttonsss" /></div>
        </div>
         <div id="task-other-insert" class="task-right-detail task-insert-index">
        	<h3 class="task-right-title">任务添加
        		<div class="task-right-close"><a>x</a></div>
        	</h3>
        	<div>
        		<div class="task-user-update"><img class="task-user-img" src="./eteams_files/img/avatar.png" width="40px" hieght="37px"></div>
        		<textarea class="task-right-textarea" id="task-insert-content" style="overflow:scroll;overflow-y:hidden;overflow-x:hidden;"></textarea> 
        		<a style="font-size:10px;color:#333;">
        		<div class="task-url-update">日志链接：</div>
        		<textarea class="url-address-textarea" id="url-insert-content" style="color:blue; overflow:scroll;overflow-y:hidden;overflow-x:hidden;"></textarea></a>
        	</div>
        	<div class="task-right-submit" id="task-insert-submit"><input type="button" value="提交" class="buttonsss" /></div>
        </div>
        <div id="daycheck-insert-page" class="task-right-detail daycheck-index">
        	<h3 class="task-right-title">每日反馈
        		<div class="task-right-close"><a>x</a></div>
        	</h3>
        	<div>
        		<div class="task-user-update"><img class="task-user-img" src="./eteams_files/img/avatar.png" width="40px" hieght="37px"></div>
        		<textarea class="task-right-textarea" id="daycheck-textarea" style="overflow:scroll;overflow-y:hidden;overflow-x:hidden;"></textarea>
        		<input type="hidden" id="task-contentd-id">    
        	</div>
        	<div class="task-right-submit" id="daycheck-commit"><input type="button" value="提交" class="buttonsss" /></div>
        </div>
   </div>
    
  </body>
  <script type="text/javascript">
	$(function(){
		//层级显示jQuery
		$(".task-right-close").click(function(){
			 $("#task-other-update").hide();
			 $("#task-other-insert").hide();
			 $("#daycheck-insert-page").hide();
		});
		//更新任务
		$(".line-task-display").click(function(){
			$("#task-right-content").val("");
			var id = $(this).attr("id");
			$("#task-other-update").show();
			$.ajax({
				url: "task/getTaskById",
				type: 'post',
				data: {'id': id },
				dataType: 'json',
				success: function(data){						
					$(".task-right-textarea").val(data.content);
					$("#task-content-id").val(data.id);
					
				},
				error: function(e){
					
				}			
			});
		});
		$("#insert-aside-task").click(function(){
			$("#task-other-insert").show();
		});
		$("#daycheck-insert").click(function(){
			$("#daycheck-insert-page").show();
		});
		
	});
	$(function(){
		/**删除任务*/
		$("#delete-task").click(function(){
			var array = new Array();
			var flag;
			$("input[name='taskid']:checked").each(function(i){				
				array.push($(this).val());
			});
			window.location.href = "task/updateDelTaskM?array="+array;
		});
		/**关注任务*/
		$("#focus-task").click(function(){
			var array = new Array();
			$("input[name='taskid']:checked").each(function(i){
				array.push($(this).val());
			});
			window.location.href = "task/updateFocusOnM?array="+array+"&focus=1";
		});
		/* 取消关注 */
		$("#cancel-task").click(function(){
			var array = new Array();
			$("input[name='taskid']:checked").each(function(i){					
				array.push($(this).val());
			});				
			window.location.href = "task/updateFocusOnM?array="+array+"&focus=0";
		});
		/* 完成任务 */
		$("#complete-task").click(function(){
			var array = new Array();
			$("input[name='taskid']:checked").each(function(i){
				array.push($(this).val());
			});
			window.location.href = "task/updateCompleteM?array="+array+"&complete=1";
		});
		/* 未完成任务 */
		$("#cancel-complete-task").click(function(){
			var array = new Array();
			$("input[name='taskid']:checked").each(function(i){
				array.push($(this).val());
			});
			window.location.href = "task/updateCompleteM?array="+array+"&complete=0";
		});
		$(".delete-img").click(function(){
			
		});
		
	});
	/****************************Ajax提交***************************************************/
	$(function(){
		/********************************每日4C**********************/
		/**每日4C反馈插入*/
			$("#daycheck-insert").click(function(){
				$("#task-other-update").hide();
				$("#task-other-insert").hide();
				//清空textarea的内容
				$("#daycheck-textarea").val("");
				$("#daycheck-insert-page").show();
				
			});
		$("#daycheck-commit").click(function(){
			var content = $("#daycheck-textarea").val();
			$("#daycheck-insert-page").hide();
			$.ajax({
				url: 'task/insertDaycheck',
				type: 'post',
				data: {'content': content},
				dataType: 'json',
				success: function(data){
					
				},
			});
		});
		/****************************新建任务**********************************/
			$("#insert-aside-task").click(function(){
				$("#task-other-update").hide();
				$("#daycheck-insert-page").hide();
				//清空textarea的内容
				$("#task-insert-content").val("");
				$("#url-insert-content").val("");
				$("#task-other-insert").show();
			});
		//新建任务
		$("#task-insert-submit").click(function(){
			debugger;
			$("#task-other-insert").hide();
			//$("#task-right-content").val('');
			var content = $("#task-insert-content").val();
			var urlAddress = $("#url-insert-content").val();
			$.ajax({
				url: 'task/createNewTaskM',
				type: 'post',
				data: {	'content': content,'urlAddress': urlAddress},
				async: false,
				dataType: 'json',
				success: function(data){
					console.log(data);
					alert(111);
					alert("ok");						
				},
			});
			location.reload(true);
		});
		
		$(".task-right-close").click(function(){
			 $("#task-other-update").hide();
			 $("#task-other-insert").hide();
			 $("#daycheck-insert-page").hide();
		 });
		/**更新任务*/
		 $("#task-right-onetask").click(function(){
				var content = $("#task-right-content").val();
				var urlAddress = $("#url-right-content").val();
				var id = $("#task-content-id").val();
				//alert("1");
				window.location.href = "task/updateTaskM?content="+content+"&urlAddress="+urlAddress+"&id="+id;
			});
		//各种分页通用路径
				$(".page-task-num").click(function(){
					//alert("1");
					var num = $(this).attr('title');
					var status = $("#statuess").val();
					window.location.href = "task/rotationM/"+num+"/"+status;	
				});	
		});
	
		 
  </script>
</html>